<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd" [<!ENTITY nbsp "&#160;">]>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	lang="en">
<h:head>
  <link type="text/css" rel="stylesheet" href="css/style.css"></link>
   <script type="text/javascript" src="./js/toggle.js"></script>
  <script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-38606779-2']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>

  <title>Dashboard v1.4</title>
</h:head>
<h:body>
<div class="header">
<div class="page_container">

<div class="top_strip"> 

<div id="top_right_container">
  <ul>
    <li><strong> alan@propellernet.co.uk </strong> |</li>
    <li><a href="#" target="_blank"> My Account </a> |</li>
    <li><a href="/help.html" target="_blank"> Help </a></li>
  </ul>
</div>


</div>
  <div class="top_banner">
    <div class="logo_container"> <a id="logo_small_left" class="ir float_left"
								href="http://gofetchdata.appspot.com/"></a> 
    </div>
    <h:form>
    <p:selectCheckboxMenu styleClass="float_left selectClientDropMenu"
							value="#{fullScreenDashboardBean.selectedClients}" label="Clients"
							filter="true" filterText="Filter" filterMatchMode="startsWith"
							panelStyle="width:280px" 
							>
          <p:ajax
								listener="#{fullScreenDashboardBean.clientSelectionChange}"
								update=":leftContentForm" />
          <f:selectItems value="#{fullScreenDashboardBean.clientsMenu}" />
          <f:selectItem itemLabel="* Add New Client" itemValue="" />
        </p:selectCheckboxMenu>
        
  
        <p:commandButton styleClass="float_left contactsDBBtn" widgetVar="contactsDBBtn"
									onclick="showContactsDashboard()" type="push" value="Contacts" />
      
        <p:commandButton styleClass="float_left urlsLinksDBBtn" widgetVar="urlsLinksDBBtn"
									onclick="showURLsLinksDashboard()" type="push"
									value="URLs/Links" />
                                    
         <div styleClass="url_add_search_btns float_right" style="float:right; padding:0px 5px; border-style:solid;
border-width:2px; border-color:rgb(235, 190, 0);">                           
        <p:autoComplete styleClass="urlSearchTextBox" value="#{goFetchRequestBean.url}" id="targetURL"
									completeMethod="#{goFetchRequestBean.completeURLs}" 
									maxResults="5" minQueryLength="7" size="50"></p:autoComplete>
                                                                
       
        <p:commandButton styleClass="searchURLBtn"
										widgetVar="searchURLBtn" onclick="#" type="push"
										value="Search" />
        <p:commandButton styleClass="addURLBtn" widgetVar="addURLBtn"
										onclick="#" type="push" value="Add" />
        </div>                             
	</h:form>
  </div>
  
</div>
</div>

<div class="left_content">
<h:form id="leftContentForm">
  


<p:panel  styleClass="leftHandPanel" header="" toggleable="true" toggleOrientation="horizontal"> 
 
 <!-- jquery UI code: 
 see: http://stackoverflow.com/questions/10105426/how-to-create-tabs-jquery-or-jsf
 -->
<!-- jsf Attempt 1 ui repeat
with JQuery
see: http://kahimyang.info/kauswagan/howto_blogs/1403-implementing_a_collapsible_ui_repeat_rows_in_jsf
-->
<ui:repeat value="#{collapsible.rows}"
                   var ="rows">
            <h:panelGrid>
                <h:panelGroup>
                    <h:outputLink value="javascript:void(0)"
                                  onclick="vistoggle('#icon#{rows.id}',
                                          '#body#{rows.id}')" >
 
                        <h:outputText value="#{rows.title}" />
                    </h:outputLink>
 
                    <span style="display: inline-block;margin-right:2px;">
                        <span id="icon#{rows.id}" class="ui-icon ui-icon-plus"
                              style="float:left">
                        </span>
                    </span> 
                </h:panelGroup>
 
                <div style="display:none;" id="body#{rows.id}">
                    #{rows.body}
                </div>
            </h:panelGrid>
        </ui:repeat>
        
        <ui:repeat var="selectedClients" value="#{clientTargetURLsBean.clientAndTUrlList}">
	<div class="selectedClientsDiv">
    
    <h:outputText value="#{selectedClients.user.displayed_name}" styleClass="target_url_li"/>
    
    <ui:repeat value="#{selectedClients.urls}" var="turl">
    	<div class="selectedTUrlsDiv">
        <h:selectBooleanCheckbox value="#{turl.selected}" id="selBolChkBox">
        </h:selectBooleanCheckbox>
        
        <h:outputText value="#{turl.url.url_address}" styleClass="target_url_li"/>
        
        </div>
    </ui:repeat>
    </div>

</ui:repeat>
<!--

<ui:repeat var="selectedClients" value="#{clientTargetURLsBean.clientAndTUrlList}">
	<div class="selectedClientsDiv">
    
    <h:outputText value="#{selectedClients.user.displayed_name}" styleClass="target_url_li"/>
    
    <ui:repeat value="#{selectedClients.urls}" var="turl">
    	<div class="selectedTUrlsDiv">
        <h:selectBooleanCheckbox value="#{turl.selected}" id="selBolChkBox">
        </h:selectBooleanCheckbox>
        
        <h:outputText value="#{turl.url.url_address}" styleClass="target_url_li"/>
        
        </div>
    </ui:repeat>
    </div>

</ui:repeat>

-->



<!-- jsf Attempt 2 datatable-->

<!-- This does not work on server there is no ajax functionality when user selects a tab or checks T URL checkbox...
	 - replace with jquery UI code... above
 <p:accordionPanel id="clientsAndURLsTab" var="selectedClients" value="#{clientTargetURLsBean.clientAndTUrlList}"
				 orientation="left" style="font-size:10px; border:none;"  dynamic="false">
                 <p:ajax event="tabChange" listener="#{fullScreenDashboardBean.onTabChange}"/>
        <p:tab id="clientTab" title="#{selectedClients.user.displayed_name}">
        
         <p:dataList value="#{selectedClients.urls}" var="turl" itemType="none">
          <p:column>
         
          <p:selectBooleanCheckbox value="#{turl.selected}" id="selBolChkBox">
            <p:ajax update=":centreContentForm" listener="#{fullScreenDashboardBean.testAjaxSelectBtn}" />
          </p:selectBooleanCheckbox>
          
          <h:outputText value="#{turl.url.url_address}" styleClass="target_url_li"/>
        </p:column>
        </p:dataList>  
             
        </p:tab>
        </p:accordionPanel>
        
        -->
  </p:panel>
    
  </h:form>

</div>
 
 <div class="main_content">
 <h:form id="centreContentForm">
 </h:form>
   
 </div>
</h:body>
<script type="text/javascript">
var TabbedPanels1 = new Spry.Widget.TabbedPanels("TabbedPanels1");
</script>
</html>